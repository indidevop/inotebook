{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/Amey Sawalkar/Desktop/React/inotebook/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/Amey Sawalkar/Desktop/React/inotebook/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/Amey Sawalkar/Desktop/React/inotebook/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import NoteContext from\"./noteContext\";import{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var NoteState=function NoteState(props){var host=\"http://localhost:5000\";var notesInitial=[];var _useState=useState(notesInitial),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setnotes=_useState2[1];// Get All Notes\nvar fetchallNotes=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,json;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"\".concat(host,\"/api/notes/fetchallnotes\"),{method:\"GET\",headers:{\"auth-token\":localStorage.getItem('authtoken'),\"Content-Type\":\"application/json\"}});case 2:response=_context.sent;_context.next=5;return response.json();case 5:json=_context.sent;setnotes(json);// console.log(json);\ncase 7:case\"end\":return _context.stop();}},_callee);}));return function fetchallNotes(){return _ref.apply(this,arguments);};}();// Add Note\nvar addNote=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(title,description,tag){var response,note;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"\".concat(host,\"/api/notes/addnote\"),{method:\"POST\",headers:{\"auth-token\":localStorage.getItem('authtoken'),\"Content-Type\":\"application/json\"},body:JSON.stringify({title:title,description:description,tag:tag})});case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:note=_context2.sent;setnotes(notes.concat(note));case 7:case\"end\":return _context2.stop();}},_callee2);}));return function addNote(_x,_x2,_x3){return _ref2.apply(this,arguments);};}();var deleteNote=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var newNotes,response,json;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:newNotes=notes.filter(function(note){return note._id!==id;});setnotes(newNotes);_context3.next=4;return fetch(\"\".concat(host,\"/api/notes/deletenote/\").concat(id),{method:\"DELETE\",headers:{\"auth-token\":localStorage.getItem('authtoken'),\"Content-Type\":\"application/json\"}});case 4:response=_context3.sent;_context3.next=7;return response.json();case 7:json=_context3.sent;console.log(json);case 9:case\"end\":return _context3.stop();}},_callee3);}));return function deleteNote(_x4){return _ref3.apply(this,arguments);};}();// Edit Note\nvar editNote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(id,title,description,tag){var response,json,newNotes,key;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:_context4.next=2;return fetch(\"\".concat(host,\"/api/notes/updatenote/\").concat(id),{method:\"PUT\",headers:{\"auth-token\":localStorage.getItem('authtoken'),\"Content-Type\":\"application/json\"},body:JSON.stringify({title:title,description:description,tag:tag})});case 2:response=_context4.sent;_context4.next=5;return response.json();case 5:json=_context4.sent;console.log(json);//Frontend update\nnewNotes=JSON.parse(JSON.stringify(notes));// incresed time so that it runs after update\n_context4.t0=_regeneratorRuntime().keys(newNotes);case 9:if((_context4.t1=_context4.t0()).done){_context4.next=18;break;}key=_context4.t1.value;if(!(newNotes[key]._id===id)){_context4.next=16;break;}newNotes[key].title=title;newNotes[key].description=description;newNotes[key].tag=tag;return _context4.abrupt(\"break\",18);case 16:_context4.next=9;break;case 18:setnotes(newNotes);case 19:case\"end\":return _context4.stop();}},_callee4);}));return function editNote(_x5,_x6,_x7,_x8){return _ref4.apply(this,arguments);};}();// Alert functions\nvar _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),alert=_useState4[0],setalert=_useState4[1];var showAlert=function showAlert(message,type){setalert({msg:message,type:type});setTimeout(function(){setalert(null);},3000);};var getUser=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(token){var response,json;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:_context5.next=2;return fetch(\"http://localhost:5000/api/auth/getuser\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"auth-token\":token}});case 2:response=_context5.sent;_context5.next=5;return response.json();case 5:json=_context5.sent;console.log(json);localStorage.setItem('username',json.name);case 8:case\"end\":return _context5.stop();}},_callee5);}));return function getUser(_x9){return _ref5.apply(this,arguments);};}();return/*#__PURE__*/_jsx(NoteContext.Provider,{value:{notes:notes,addNote:addNote,deleteNote:deleteNote,editNote:editNote,fetchallNotes:fetchallNotes,alert:alert,showAlert:showAlert,getUser:getUser},children:props.children});};export default NoteState;","map":{"version":3,"names":["NoteContext","useState","NoteState","props","host","notesInitial","notes","setnotes","fetchallNotes","fetch","method","headers","localStorage","getItem","response","json","addNote","title","description","tag","body","JSON","stringify","note","concat","deleteNote","id","newNotes","filter","_id","console","log","editNote","parse","key","alert","setalert","showAlert","message","type","msg","setTimeout","getUser","token","setItem","name","children"],"sources":["C:/Users/Amey Sawalkar/Desktop/React/inotebook/src/contexts/notes/NoteState.js"],"sourcesContent":["import NoteContext from \"./noteContext\";\r\nimport { useState } from \"react\";\r\n\r\nconst NoteState = (props) => {\r\n\r\n  const host = \"http://localhost:5000\"\r\n\r\n\r\n  const notesInitial = [];\r\n\r\n  const [notes, setnotes] = useState(notesInitial);\r\n  \r\n\r\n  // Get All Notes\r\n  const fetchallNotes = async () => {\r\n\r\n    const response = await fetch(`${host}/api/notes/fetchallnotes`,\r\n      {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"auth-token\": localStorage.getItem('authtoken'),\r\n          \"Content-Type\": \"application/json\"\r\n        }\r\n      })\r\n\r\n    const json = await response.json();\r\n    setnotes(json)\r\n    // console.log(json);\r\n\r\n  }\r\n\r\n  // Add Note\r\n  const addNote = async (title, description, tag) => {\r\n\r\n    const response = await fetch(`${host}/api/notes/addnote`,\r\n      {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"auth-token\": localStorage.getItem('authtoken'),\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({ title, description, tag }),\r\n      })\r\n    const note = await response.json();\r\n    setnotes(notes.concat(note))\r\n  }\r\n\r\n  const deleteNote = async (id) => {\r\n\r\n    const newNotes = notes.filter((note) => { return note._id !== id });\r\n    setnotes(newNotes);\r\n\r\n    const response = await fetch(`${host}/api/notes/deletenote/${id}`,\r\n      {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          \"auth-token\": localStorage.getItem('authtoken'),\r\n          \"Content-Type\": \"application/json\"\r\n        }\r\n      })\r\n\r\n    const json = await response.json();\r\n    console.log(json);\r\n\r\n  }\r\n\r\n  // Edit Note\r\n  const editNote = async (id, title, description, tag) => {\r\n\r\n    const response = await fetch(`${host}/api/notes/updatenote/${id}`,\r\n      {\r\n        method: \"PUT\",\r\n        headers: {\r\n          \"auth-token\": localStorage.getItem('authtoken'),\r\n          \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({ title, description, tag }),\r\n      })\r\n    const json = await response.json();\r\n    console.log(json);\r\n\r\n    //Frontend update\r\n    let newNotes = JSON.parse(JSON.stringify(notes)) // incresed time so that it runs after update\r\n    for (const key in newNotes) {\r\n      if (newNotes[key]._id === id) {\r\n        newNotes[key].title = title;\r\n        newNotes[key].description = description;\r\n        newNotes[key].tag = tag;\r\n        break;\r\n      }\r\n    }\r\n    setnotes(newNotes);\r\n\r\n  }\r\n\r\n  // Alert functions\r\n  const [alert, setalert] = useState(null)\r\n\r\n  const showAlert = (message, type) => {\r\n    setalert({\r\n      msg: message,\r\n      type: type\r\n    })\r\n    setTimeout(() => {\r\n      setalert(null);\r\n    }, 3000);\r\n  }\r\n\r\n  \r\n  const getUser=async (token)=>{\r\n    const response = await fetch(`http://localhost:5000/api/auth/getuser`,\r\n    {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Content-Type\": \"application/json\",\r\n            \"auth-token\":token\r\n        }\r\n    })\r\n\r\nconst json = await response.json();\r\nconsole.log(json);\r\nlocalStorage.setItem('username',json.name)\r\n}\r\n\r\n  return (\r\n    <NoteContext.Provider value={{ notes, addNote, deleteNote, editNote, fetchallNotes, alert, showAlert,getUser}}>\r\n      {props.children}\r\n    </NoteContext.Provider>\r\n  )\r\n}\r\n\r\nexport default NoteState;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}